var Modal=function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{"default":t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t){for(var e in t)Array.isArray(t[e])?t[e].forEach(function(t){o(t)}):null!==t[e]&&"object"==typeof t[e]&&Object.freeze(t[e]);return Object.freeze(t)}function a(){return(65536*(1+Math.random())|0).toString(16)+(65536*(1+Math.random())|0).toString(16)}function l(t,e,n){var i="data",r=t[i]||{};if("undefined"==typeof n){if(t[i]&&t[i][e])return t[i][e];var s=t.getAttribute(i+"-"+e);return"undefined"!=typeof s?s:null}return r[e]=n,t[i]=r,t}function d(t,e){return t.nodeName?t:(t=t.replace(/(\t|\n$)/g,""),p.innerHTML="",p.innerHTML=t,e===!0?p.childNodes:p.childNodes[0])}function h(){var t=void 0,e=void 0,n=void 0,i=document.createElement("div");return Object.assign(i.style,{visibility:"hidden",width:"100px"}),document.body.appendChild(i),n=i.offsetWidth,i.style.overflow="scroll",t=document.createElement("div"),t.style.width="100%",i.appendChild(t),e=n-t.offsetWidth,document.body.removeChild(i),e}Object.defineProperty(e,"__esModule",{value:!0});var c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=function(t,e,n){for(var i=!0;i;){var r=t,s=e,o=n;i=!1,null===r&&(r=Function.prototype);var a=Object.getOwnPropertyDescriptor(r,s);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(o)}var d=Object.getPrototypeOf(r);if(null===d)return;t=d,e=s,n=o,i=!0,a=d=void 0}},v=n(1),f=i(v),p=document.createElement("div"),m=h(),_=Object.freeze({el:null,animate:!0,animateClass:"fade",appendTo:"body",backdrop:!0,keyboard:!0,title:!1,header:!0,content:!1,footer:!0,buttons:null,headerClose:!0,construct:!1,transition:300,backdropTransition:150}),y=o({dialog:[{text:"Cancel",value:!1,attr:{"class":"btn btn-flat btn-danger","data-dismiss":"modal"}},{text:"OK",value:!0,attr:{"class":"btn btn-primary","data-dismiss":"modal"}}],alert:[{text:"OK",attr:{"class":"btn btn-primary","data-dismiss":"modal"}}],confirm:[{text:"Cancel",value:!1,attr:{"class":"btn btn-danger","data-dismiss":"modal"}},{text:"OK",value:!0,attr:{"class":"btn btn-primary","data-dismiss":"modal"}}]}),b={container:'<div class="modal"></div>',dialog:'<div class="modal-dialog"></div>',content:'<div class="modal-content"></div>',header:'<div class="modal-header"></div>',body:'<div class="modal-body"></div>',footer:'<div class="modal-footer"></div>',backdrop:'<div class="modal-backdrop"></div>'},g=function(t){function e(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];if(r(this,e),u(Object.getPrototypeOf(e.prototype),"constructor",this).call(this),this.id=a(),this.el=null,this._html={},this._handlers={},this._visible=!1,this._options=Object.assign({},e.options,t),this._templates=Object.assign({},e.templates,t.templates||{}),this._html.appendTo=document.querySelector(this._options.appendTo),null===this._options.buttons&&(this._options.buttons=e.buttons.dialog),this._options.el){var n=this._options.el;if("string"==typeof this._options.el&&(n=document.querySelector(this._options.el),!n))throw new Error("Selector: DOM Element "+this._options.el+" not found.");l(n,"modal",this),this.el=n}else this._options.construct=!0;this._options.construct?this._render():this._mapDom()}return s(e,t),c(e,null,[{key:"alert",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=Object.assign({},_,{title:t,content:!1,construct:!0,buttons:y.alert},n);return new e(i)}},{key:"confirm",value:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=Object.assign({},_,{title:t,content:!1,construct:!0,buttons:y.confirm},n);return new e(i)}},{key:"templates",get:function(){return Object.assign({},b)}},{key:"buttons",get:function(){return Object.assign({},y)}},{key:"options",get:function(){return Object.assign({},_)}},{key:"version",get:function(){return"0.3.1"}}]),c(e,[{key:"_render",value:function(){var t=this._html,e=this._options,n=this._templates,i=e.animate?e.animateClass:!1;return t.container=d(n.container),t.dialog=d(n.dialog),t.content=d(n.content),t.header=d(n.header),t.body=d(n.body),t.footer=d(n.footer),i&&t.container.classList.add(i),this._setHeader(),this._setContent(),this._setFooter(),this.el=t.container,t.dialog.appendChild(t.content),t.container.appendChild(t.dialog),this}},{key:"_mapDom",value:function(){var t=this._html,e=this._options;return this.el.classList.contains(e.animateClass)&&(e.animate=!0),t.container=this.el,t.dialog=this.el.querySelector(".modal-dialog"),t.content=this.el.querySelector(".modal-content"),t.header=this.el.querySelector(".modal-header"),t.body=this.el.querySelector(".modal-body"),t.footer=this.el.querySelector(".modal-footer"),this._setHeader(),this._setContent(),this._setFooter(),this}},{key:"_setHeader",value:function(){var t=this._html,e=this._options;(e.header&&!t.header.nodeName||e.title)&&(e.title.nodeName?t.header.innerHTML=e.title.outerHTML:"string"==typeof e.title&&(t.header.innerHTML='<h4 class="modal-title">'+e.title+"</h4>"),t.content.appendChild(t.header))}},{key:"_setContent",value:function(){var t=this._html,e=this._options;e.content&&("string"==typeof e.content?t.body.innerHTML=e.content:t.body.innerHTML=e.content.outerHTML,t.content.appendChild(t.body))}},{key:"_setFooter",value:function(){var t=this._html,e=this._options;e.footer&&(t.footer.innerHTML="",e.footer.nodeName?t.footer.ineerHTML=e.footer.outerHTML:"string"==typeof e.footer?t.footer.innerHTML=e.footer:e.buttons.forEach(function(e){var n=document.createElement("button");l(n,"button",e),n.innerHTML=e.text;var i=!0,r=!1,s=void 0;try{for(var o,a=Object.keys(e.attr)[Symbol.iterator]();!(i=(o=a.next()).done);i=!0){var d=o.value;n.setAttribute(d,e.attr[d])}}catch(h){r=!0,s=h}finally{try{!i&&a["return"]&&a["return"]()}finally{if(r)throw s}}t.footer.appendChild(n)}),t.content.appendChild(t.footer))}},{key:"_setEvents",value:function(){var t=this,e=this._options,n=this._html;e.backdrop===!0&&(this._handlers.keydownHandler=function(e){return t._handleKeydownEvent(e)},document.body.addEventListener("keydown",this._handlers.keydownHandler)),this._handlers.clickHandler=function(e){return t._handleClickEvent(e)},n.container.addEventListener("click",this._handlers.clickHandler),this._handlers.resizeHandler=function(e){return t._handleResizeEvent(e)},window.addEventListener("resize",this._handlers.resizeHandler)}},{key:"_handleClickEvent",value:function(t){var e=this._html;return"modal"===t.target.getAttribute("data-dismiss")?(this.emit("dismiss",this,t,l(t.target,"button")),this.hide(),!0):t.target!==e.container?!0:(this.emit("dismiss",this,t,null),void this.hide())}},{key:"_handleKeydownEvent",value:function(t){27===t.which&&(this.emit("dismiss",this,t,null),this.hide())}},{key:"_handleResizeEvent",value:function(t){this._resize()}},{key:"show",value:function(){var t=this,e=this._options,n=this._html;return this.emit("show",this),this._checkScrollbar(),this._setScrollbar(),document.body.classList.add("modal-open"),e.construct&&n.appendTo.appendChild(n.container),n.container.style.display="block",n.container.scrollTop=0,this.once("showBackdrop",function(){t._setEvents(),e.animate&&n.container.offsetWidth,n.container.classList.add("in"),setTimeout(function(){t._visible=!0,t.emit("shown",t)},e.transition)}),this._backdrop(),this._resize(),this}},{key:"_resize",value:function(){var t=this._html.container.scrollHeight>document.documentElement.clientHeight;this._html.container.style.paddingLeft=!this.bodyIsOverflowing&&t?m+"px":"",this._html.container.style.paddingRight=this.bodyIsOverflowing&&!t?m+"px":""}},{key:"_backdrop",value:function(){var t=this,e=this._html,n=this._templates,i=this._options,r=i.animate?i.animateClass:!1;e.backdrop=d(n.backdrop),r&&e.backdrop.classList.add(r),e.appendTo.appendChild(e.backdrop),r&&e.backdrop.offsetWidth,e.backdrop.classList.add("in"),setTimeout(function(){t.emit("showBackdrop",t)},this._options.backdropTransition)}},{key:"hide",value:function(){var t=this,e=this._html,n=this._options,i=e.backdrop.classList,r=e.container.classList;return this.emit("hide",this),i.remove("in"),r.remove("in"),this._removeEvents(),setTimeout(function(){document.body.classList.remove("modal-open"),document.body.style.paddingRight=t.originalBodyPad},n.backdropTransition),setTimeout(function(){e.backdrop.remove(),e.container.style.display="none",n.construct&&e.container.remove(),t._visible=!1,t.emit("hidden",t)},n.transition),this}},{key:"_removeEvents",value:function(){this._handlers.keydownHandler&&document.body.removeEventListener("keydown",this._handlers.keydownHandler),this._html.container.removeEventListener("click",this._handlers.clickHandler),window.removeEventListener("resize",this._handlers.resizeHandler)}},{key:"_checkScrollbar",value:function(){this.bodyIsOverflowing=document.body.clientWidth<window.innerWidth}},{key:"_setScrollbar",value:function(){if(this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing){var t=parseInt(this.originalBodyPad||0,10);document.body.style.paddingRight=t+m+"px"}}}]),e}(f["default"]);e["default"]=g,t.exports=e["default"]},function(t,e){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function s(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}t.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},n.prototype.emit=function(t){var e,n,r,a,l,d;if(this._events||(this._events={}),"error"===t&&(!this._events.error||s(this._events.error)&&!this._events.error.length)){if(e=arguments[1],e instanceof Error)throw e;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[t],o(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),n.apply(this,a)}else if(s(n))for(a=Array.prototype.slice.call(arguments,1),d=n.slice(),r=d.length,l=0;r>l;l++)d[l].apply(this,a);return!0},n.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?s(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,s(this._events[t])&&!this._events[t].warned&&(r=o(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())),this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return n.listener=e,this.on(t,n),this},n.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(s(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(0>r)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},n.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},n.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},n.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},n.listenerCount=function(t,e){return t.listenerCount(e)}}]);
